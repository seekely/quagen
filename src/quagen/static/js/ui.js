var ui=function(e){"use strict";function t(){}function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function i(){return Object.create(null)}function r(e){e.forEach(o)}function s(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c,d=!1;function a(e,t,n,o){for(;e<t;){const i=e+(t-e>>1);n(i)<=o?e=i+1:t=i}return e}function u(e,t){d?(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;const t=e.childNodes,n=new Int32Array(t.length+1),o=new Int32Array(t.length);n[0]=-1;let i=0;for(let e=0;e<t.length;e++){const r=a(1,i+1,e=>t[n[e]].claim_order,t[e].claim_order)-1;o[e]=n[r]+1;const s=r+1;n[s]=e,i=Math.max(s,i)}const r=[],s=[];let l=t.length-1;for(let e=n[i]+1;0!=e;e=o[e-1]){for(r.push(t[e-1]);l>=e;l--)s.push(t[l]);l--}for(;l>=0;l--)s.push(t[l]);r.reverse(),s.sort((e,t)=>e.claim_order-t.claim_order);for(let t=0,n=0;t<s.length;t++){for(;n<r.length&&s[t].claim_order>=r[n].claim_order;)n++;const o=n<r.length?r[n]:null;e.insertBefore(s[t],o)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function f(e,t,n){d&&!n?u(e,t):(t.parentNode!==e||n&&t.nextSibling!==n)&&e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function p(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function v(){return h(" ")}function y(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function x(e,t,n,o){e.style.setProperty(t,n,o?"important":"")}function w(e,t,n){e.classList[n?"add":"remove"](t)}function _(e){c=e}function k(){const e=function(){if(!c)throw new Error("Function called outside component initialization");return c}();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);o.slice().forEach(t=>{t.call(e,i)})}}}function C(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e.call(this,t))}const j=[],I=[],M=[],S=[],z=Promise.resolve();let E=!1;function H(e){M.push(e)}let O=!1;const P=new Set;function B(){if(!O){O=!0;do{for(let e=0;e<j.length;e+=1){const t=j[e];_(t),T(t.$$)}for(_(null),j.length=0;I.length;)I.pop()();for(let e=0;e<M.length;e+=1){const t=M[e];P.has(t)||(P.add(t),t())}M.length=0}while(j.length);for(;S.length;)S.pop()();E=!1,O=!1,P.clear()}}function T(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}const A=new Set;let L;function N(){L={r:0,c:[],p:L}}function F(){L.r||r(L.c),L=L.p}function U(e,t){e&&e.i&&(A.delete(e),e.i(t))}function V(e,t,n,o){if(e&&e.o){if(A.has(e))return;A.add(e),L.c.push(()=>{A.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}}const R="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Y(e,t){const n={},o={},i={$$scope:1};let r=e.length;for(;r--;){const s=e[r],l=t[r];if(l){for(const e in s)e in l||(o[e]=1);for(const e in l)i[e]||(n[e]=l[e],i[e]=1);e[r]=l}else for(const e in s)i[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function q(e){return"object"==typeof e&&null!==e?e:{}}function D(e){e&&e.c()}function G(e,t,n,i){const{fragment:l,on_mount:c,on_destroy:d,after_update:a}=e.$$;l&&l.m(t,n),i||H(()=>{const t=c.map(o).filter(s);d?d.push(...t):r(t),e.$$.on_mount=[]}),a.forEach(H)}function J(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K(e,t){-1===e.$$.dirty[0]&&(j.push(e),E||(E=!0,z.then(B)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(e,n,o,s,l,a,u=[-1]){const f=c;_(e);const p=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:n.context||[]),callbacks:i(),dirty:u,skip_bound:!1};let g=!1;if(p.ctx=o?o(e,n.props||{},(t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),g&&K(e,t)),n}):[],p.update(),g=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){d=!0;const e=function(e){return Array.from(e.childNodes)}(n.target);p.fragment&&p.fragment.l(e),e.forEach(m)}else p.fragment&&p.fragment.c();n.intro&&U(e.$$.fragment),G(e,n.target,n.anchor,n.customElement),d=!1,B()}_(f)}class W{$destroy(){J(this,1),this.$destroy=t}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class X{constructor(e){this.gameId=e,this.init=!1,this.completed=!1,this.moveHistory=[],this.moveLast=[],this.players={},this.scores=[],this.settings={},this.spotsCurrent=[],this.spotsProjected=[],this.turnCompleted=0,this.timeCompleted=null,this.timeCreated=0,this.timeStarted=null,this.timeUpdated=0}update(e){this.completed="completed"in e?e.completed:this.completed,this.players="players"in e?e.players:this.players,this.scores="scores"in e?e.scores:this.scores,this.settings="settings"in e?e.settings:this.settings,this.spotsCurrent="board"in e?e.board:this.spotsCurrent,this.spotsProjected="projected"in e?e.projected:this.spotsProjected,this.turnCompleted="turn_completed"in e?e.turn_completed:this.turnCompleted,this.timeCompleted="time_completed"in e?e.time_completed:this.timeCompleted,this.timeCreated="time_created"in e?e.time_created:this.timeCreated,this.timeStarted="time_started"in e?e.time_started:this.timeStarted,this.timeUpdated="time_updated"in e?e.time_updated:this.timeUpdated,this.moveHistory="history"in e?e.history:this.moveHistory,0<this.moveHistory.length&&(this.moveLast=this.moveHistory.slice(-1)[0]),this.init=!0}getSetting(e){if(!(e in this.settings))throw`Setting '${e}'' does not exist`;return this.settings[e]}isVsHuman(){const e=this.getSetting("ai_count");return this.getSetting("player_count")-e>1}isVsAI(){return this.getSetting("ai_count")>0}}class Z{constructor(e,t=null){this._gameState=e,this._callback=t,this._inFlight=!1,this._timeBetweenPoll=1e3,this._interval=null}async start(){const e=this;if(null==e._interval)return e._interval=setInterval(()=>{e._poll()},e._timeBetweenPoll),e._poll()}stop(){null!=this._interval&&(clearInterval(this._interval),this._interval=null)}async _poll(){if(this._inFlight)return;this._inFlight=!0;const e=this,t=e._gameState.timeUpdated,n="?updatedAfter="+t;return fetch(`/api/v1/game/${e._gameState.gameId}${n}`).then(t=>{if(e._inFlight=!1,200==t.status)return t.json();throw t.statusText}).then(n=>{t<n.game.time_updated&&(e._gameState.update(n.game),null!=this._callback&&this._callback())}).catch(()=>{e._inFlight=!1})}}function ee(e){let n,o,i,r;return{c(){n=g("button"),$(n,"type","button"),x(n,"background-color",te(e[3],e[4])),n.disabled=o=!e[5],$(n,"class","svelte-1spi4vf"),w(n,"outline",e[2]||e[1]||e[0]),w(n,"pulse",!e[1]&&!e[2]&&e[5]),w(n,"selected",e[0]&&!e[1]&&!e[2]&&e[5])},m(t,o){f(t,n,o),i||(r=y(n,"mouseup",e[6]),i=!0)},p(e,[t]){24&t&&x(n,"background-color",te(e[3],e[4])),32&t&&o!==(o=!e[5])&&(n.disabled=o),7&t&&w(n,"outline",e[2]||e[1]||e[0]),38&t&&w(n,"pulse",!e[1]&&!e[2]&&e[5]),39&t&&w(n,"selected",e[0]&&!e[1]&&!e[2]&&e[5])},i:t,o:t,d(e){e&&m(n),i=!1,r()}}}function te(e,t){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${t})`}function ne(e,t,n){let o;const i=k(),r=[231,231,231],s=[240,255,0],l=[[0,0,0],[0,140,186],[244,67,54],[22,215,79],[255,195,0]];let{x:c}=t,{y:d}=t,{color:a=-1}=t,{pressures:u=[]}=t,{power:f=0}=t,{maxPower:m=4}=t,{selected:p=!1}=t,{allowMove:g=!0}=t,{pendingMove:h=!1}=t,{lastMove:v=!1}=t,y=r,$=1;return e.$$set=e=>{"x"in e&&n(7,c=e.x),"y"in e&&n(8,d=e.y),"color"in e&&n(9,a=e.color),"pressures"in e&&n(10,u=e.pressures),"power"in e&&n(11,f=e.power),"maxPower"in e&&n(12,m=e.maxPower),"selected"in e&&n(0,p=e.selected),"allowMove"in e&&n(13,g=e.allowMove),"pendingMove"in e&&n(1,h=e.pendingMove),"lastMove"in e&&n(2,v=e.lastMove)},e.$$.update=()=>{6659&e.$$.dirty&&(p||h?(n(3,y=s),n(4,$=1)):0<=a?(n(3,y=l[a]),n(4,$=0<f&&f<m?.75/m*f:1)):(n(3,y=r),n(4,$=1))),14336&e.$$.dirty&&n(5,o=g&&f<m)},[p,h,v,y,$,o,function(){i("selected",{x:c,y:d})},c,d,a,u,f,m,g]}class oe extends W{constructor(e){var t;super(),document.getElementById("svelte-1spi4vf-style")||((t=g("style")).id="svelte-1spi4vf-style",t.textContent="button.svelte-1spi4vf,button.svelte-1spi4vf:disabled,button[disabled].svelte-1spi4vf{margin:1px;padding:0px;height:25px;width:25px;color:white;font:inherit;font-weight:bold;font-size:12px;text-align:center;border:1px solid black;outline:none}button.svelte-1spi4vf:active{box-shadow:inset 2px 2px 6px #c1c1c1}@keyframes svelte-1spi4vf-pulse{25%{transform:scale(1.1)}75%{transform:scale(0.9)}}.selected.svelte-1spi4vf,.pulse.svelte-1spi4vf:hover{animation-name:svelte-1spi4vf-pulse;animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite}.outline.svelte-1spi4vf,.pulse.svelte-1spi4vf:hover{z-index:2;border:1px solid rgba(0, 0, 0, 0) !important;outline:3px solid black !important}",u(document.head,t)),Q(this,e,ne,ee,l,{x:7,y:8,color:9,pressures:10,power:11,maxPower:12,selected:0,allowMove:13,pendingMove:1,lastMove:2})}}const{document:ie}=R;function re(e,t,n){const o=e.slice();return o[14]=t[n],o[16]=n,o}function se(e,t,n){const o=e.slice();return o[14]=t[n],o[18]=n,o}function le(e){let t,o;const i=[{x:e[18]},{y:e[16]},{allowMove:e[0]},e[3][e[18]][e[16]],{selected:e[7]==e[18]&&e[8]==e[16]},{lastMove:ae(e[10],e[18],e[16])},{pendingMove:e[7]==e[18]&&e[8]==e[16]&&e[9]}];let r={};for(let e=0;e<i.length;e+=1)r=n(r,i[e]);return t=new oe({props:r}),t.$on("selected",e[4]),{c(){D(t.$$.fragment)},m(e,n){G(t,e,n),o=!0},p(e,n){const o=1961&n?Y(i,[i[0],i[1],1&n&&{allowMove:e[0]},8&n&&q(e[3][e[18]][e[16]]),384&n&&{selected:e[7]==e[18]&&e[8]==e[16]},1056&n&&{lastMove:ae(e[10],e[18],e[16])},896&n&&{pendingMove:e[7]==e[18]&&e[8]==e[16]&&e[9]}]):{};t.$set(o)},i(e){o||(U(t.$$.fragment,e),o=!0)},o(e){V(t.$$.fragment,e),o=!1},d(e){J(t,e)}}}function ce(e){let t,n,o,i={length:e[1]},r=[];for(let t=0;t<i.length;t+=1)r[t]=le(se(e,i,t));const s=e=>V(r[e],1,1,()=>{r[e]=null});return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=v(),n=g("br")},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);f(e,t,i),f(e,n,i),o=!0},p(e,n){if(1979&n){let o;for(i={length:e[1]},o=0;o<i.length;o+=1){const s=se(e,i,o);r[o]?(r[o].p(s,n),U(r[o],1)):(r[o]=le(s),r[o].c(),U(r[o],1),r[o].m(t.parentNode,t))}for(N(),o=i.length;o<r.length;o+=1)s(o);F()}},i(e){if(!o){for(let e=0;e<i.length;e+=1)U(r[e]);o=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)V(r[e]);o=!1},d(e){p(r,e),e&&m(t),e&&m(n)}}}function de(e){let t,n,o={length:e[2]},i=[];for(let t=0;t<o.length;t+=1)i[t]=ce(re(e,o,t));const r=e=>V(i[e],1,1,()=>{i[e]=null});return{c(){t=g("div");for(let e=0;e<i.length;e+=1)i[e].c();$(t,"class","container svelte-3bn73f"),x(t,"min-width",e[6]+"px")},m(e,o){f(e,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n=!0},p(e,[s]){if(1983&s){let n;for(o={length:e[2]},n=0;n<o.length;n+=1){const r=re(e,o,n);i[n]?(i[n].p(r,s),U(i[n],1)):(i[n]=ce(r),i[n].c(),U(i[n],1),i[n].m(t,null))}for(N(),n=o.length;n<i.length;n+=1)r(n);F()}(!n||64&s)&&x(t,"min-width",e[6]+"px")},i(e){if(!n){for(let e=0;e<o.length;e+=1)U(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)V(i[e]);n=!1},d(e){e&&m(t),p(i,e)}}}function ae(e,t,n){for(let o of e)if(t==o[0]&&n==o[1])return!0;return!1}function ue(e,t,n){let o,i,r,s,l;const c=k();let{turnCompleted:d=0}=t,{width:a=0}=t,{height:u=0}=t,{spots:f=[]}=t,{allowMove:m=!0}=t,{moveHistory:p=[]}=t;return e.$$set=e=>{"turnCompleted"in e&&n(11,d=e.turnCompleted),"width"in e&&n(1,a=e.width),"height"in e&&n(2,u=e.height),"spots"in e&&n(3,f=e.spots),"allowMove"in e&&n(0,m=e.allowMove),"moveHistory"in e&&n(12,p=e.moveHistory)},e.$$.update=()=>{if(2048&e.$$.dirty&&n(7,o=-1),2048&e.$$.dirty&&n(8,i=-1),2048&e.$$.dirty&&n(9,r=!1),4096&e.$$.dirty&&n(10,s=p.length>0?p.slice(-1)[0]:[]),2&e.$$.dirty&&n(6,l=26*a+75),66&e.$$.dirty){const e=document.getElementById("viewport");0<a&&l>screen.width&&e.setAttribute("content","width="+l)}},[m,a,u,f,function(e){const t=e.detail.x,s=e.detail.y;m&&(1!=window.CAPABILITY_TOUCH||o==t&&i==s?(n(9,r=!0),n(0,m=!1),n(7,o=t),n(8,i=s),c("move",{x:t,y:s})):(n(7,o=t),n(8,i=s)))},ae,l,o,i,r,s,d,p]}class fe extends W{constructor(e){var t;super(),ie.getElementById("svelte-3bn73f-style")||((t=g("style")).id="svelte-3bn73f-style",t.textContent="div.container.svelte-3bn73f{line-height:1px}",u(ie.head,t)),Q(this,e,ue,de,l,{turnCompleted:11,width:1,height:2,spots:3,allowMove:0,moveHistory:12,handleSpotSelected:4,isLastMove:5})}get handleSpotSelected(){return this.$$.ctx[4]}get isLastMove(){return ae}}function me(e){let t;return{c(){t=g("div"),t.innerHTML='<img src="/img/crown.png" width="35px" alt="Crown!"/>',$(t,"class","crown svelte-jyd0vx")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function pe(e){let t,n,o,i,r,s,l,c;return{c(){t=g("div"),n=h(e[2]),o=v(),i=g("div"),r=h(e[4]),s=v(),l=g("div"),c=h(e[3])},m(e,d){f(e,t,d),u(t,n),f(e,o,d),f(e,i,d),u(i,r),f(e,s,d),f(e,l,d),u(l,c)},p(e,t){4&t&&b(n,e[2]),16&t&&b(r,e[4]),8&t&&b(c,e[3])},d(e){e&&m(t),e&&m(o),e&&m(i),e&&m(s),e&&m(l)}}}function ge(e){let n,o,i,r,s;return{c(){n=g("div"),n.textContent="Controlled",o=v(),i=g("div"),i.textContent="Projected",r=v(),s=g("div"),s.textContent="Pressuring"},m(e,t){f(e,n,t),f(e,o,t),f(e,i,t),f(e,r,t),f(e,s,t)},p:t,d(e){e&&m(n),e&&m(o),e&&m(i),e&&m(r),e&&m(s)}}}function he(e){let n,o,i,r,s=e[5]&&me();function l(e,t){return e[0]?ge:pe}let c=l(e),d=c(e);return{c(){n=g("div"),s&&s.c(),o=v(),i=g("div"),d.c(),$(i,"class",r="inner bg-color-"+e[1]+" svelte-jyd0vx"),w(i,"crown",e[5]),w(i,"key",e[0]),w(i,"player",!e[0]),$(n,"class","container svelte-jyd0vx")},m(e,t){f(e,n,t),s&&s.m(n,null),u(n,o),u(n,i),d.m(i,null)},p(e,[t]){e[5]?s||(s=me(),s.c(),s.m(n,o)):s&&(s.d(1),s=null),c===(c=l(e))&&d?d.p(e,t):(d.d(1),d=c(e),d&&(d.c(),d.m(i,null))),2&t&&r!==(r="inner bg-color-"+e[1]+" svelte-jyd0vx")&&$(i,"class",r),34&t&&w(i,"crown",e[5]),3&t&&w(i,"key",e[0]),3&t&&w(i,"player",!e[0])},i:t,o:t,d(e){e&&m(n),s&&s.d(),d.d()}}}function ve(e,t,n){let o,{key:i=!1}=t,{color:r=0}=t,{gameOver:s=!1}=t,{winner:l=!1}=t,{controlled:c=0}=t,{pressuring:d=0}=t,{projected:a=0}=t;return e.$$set=e=>{"key"in e&&n(0,i=e.key),"color"in e&&n(1,r=e.color),"gameOver"in e&&n(6,s=e.gameOver),"winner"in e&&n(7,l=e.winner),"controlled"in e&&n(2,c=e.controlled),"pressuring"in e&&n(3,d=e.pressuring),"projected"in e&&n(4,a=e.projected)},e.$$.update=()=>{192&e.$$.dirty&&n(5,o=s&&l)},[i,r,c,d,a,o,s,l]}class ye extends W{constructor(e){var t;super(),document.getElementById("svelte-jyd0vx-style")||((t=g("style")).id="svelte-jyd0vx-style",t.textContent="div.container.svelte-jyd0vx{display:inline-block}div.crown.svelte-jyd0vx{padding:0em 0em 0.2em 1.3em}div.inner.svelte-jyd0vx{padding:0.5em 1em 0.5em 1em;border:1px dashed black;text-align:center}div.key.svelte-jyd0vx{width:8em;border-radius:4px;color:black;font-weight:bolder}div.player.svelte-jyd0vx{width:4em;border-radius:4px;margin-left:0.5em;color:black;font-weight:bold}.bg-color-0.svelte-jyd0vx{background-color:rgba(0, 0, 0, 0.3)}.bg-color-1.svelte-jyd0vx{background-color:rgba(0, 140, 186, 0.35)}.bg-color-2.svelte-jyd0vx{background-color:rgba(244, 67, 54, 0.35)}.bg-color-3.svelte-jyd0vx{background-color:rgba(22, 215, 79, 0.35)}.bg-color-4.svelte-jyd0vx{background-color:rgba(255, 195, 0, 0.35)}@keyframes svelte-jyd0vx-crown{25%{transform:scale(1.05)}75%{transform:scale(1)}}.crown.svelte-jyd0vx{animation-name:svelte-jyd0vx-crown;animation-duration:2s;animation-timing-function:linear;animation-iteration-count:infinite}",u(document.head,t)),Q(this,e,ve,he,l,{key:0,color:1,gameOver:6,winner:7,controlled:2,pressuring:3,projected:4})}}function $e(e,t,n){const o=e.slice();return o[4]=t[n],o[6]=n,o}function be(e){let t;function n(e,t){return e[2]?we:xe}let o=n(e),i=o(e);return{c(){t=g("div"),i.c(),$(t,"class","gameover svelte-n38d5k")},m(e,n){f(e,t,n),i.m(t,null)},p(e,r){o!==(o=n(e))&&(i.d(1),i=o(e),i&&(i.c(),i.m(t,null)))},d(e){e&&m(t),i.d()}}}function xe(e){let t;return{c(){t=g("p"),t.textContent="This game has ended!",$(t,"class","svelte-n38d5k")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function we(e){let t;return{c(){t=g("p"),t.textContent="This game has ended in a tie!",$(t,"class","svelte-n38d5k")},m(e,n){f(e,t,n)},d(e){e&&m(t)}}}function _e(e){let t,o;const i=[{color:e[6]},{gameOver:e[0]},{winner:Ce(e[6],e[1])},e[4]];let r={};for(let e=0;e<i.length;e+=1)r=n(r,i[e]);return t=new ye({props:r}),{c(){D(t.$$.fragment)},m(e,n){G(t,e,n),o=!0},p(e,n){const o=3&n?Y(i,[i[0],1&n&&{gameOver:e[0]},2&n&&{winner:Ce(e[6],e[1])},2&n&&q(e[4])]):{};t.$set(o)},i(e){o||(U(t.$$.fragment,e),o=!0)},o(e){V(t.$$.fragment,e),o=!1},d(e){J(t,e)}}}function ke(e){let t,n,o,i,r,s,l=e[0]&&be(e);i=new ye({props:{key:!0}});let c=e[1],d=[];for(let t=0;t<c.length;t+=1)d[t]=_e($e(e,c,t));const a=e=>V(d[e],1,1,()=>{d[e]=null});return{c(){t=g("div"),l&&l.c(),n=v(),o=g("div"),D(i.$$.fragment),r=v();for(let e=0;e<d.length;e+=1)d[e].c();$(o,"class","container svelte-n38d5k")},m(e,c){f(e,t,c),l&&l.m(t,null),u(t,n),u(t,o),G(i,o,null),u(o,r);for(let e=0;e<d.length;e+=1)d[e].m(o,null);s=!0},p(e,[i]){if(e[0]?l?l.p(e,i):(l=be(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),3&i){let t;for(c=e[1],t=0;t<c.length;t+=1){const n=$e(e,c,t);d[t]?(d[t].p(n,i),U(d[t],1)):(d[t]=_e(n),d[t].c(),U(d[t],1),d[t].m(o,null))}for(N(),t=c.length;t<d.length;t+=1)a(t);F()}},i(e){if(!s){U(i.$$.fragment,e);for(let e=0;e<c.length;e+=1)U(d[e]);s=!0}},o(e){V(i.$$.fragment,e),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)V(d[e]);s=!1},d(e){e&&m(t),l&&l.d(),J(i),p(d,e)}}}function Ce(e,t){let n=!0;const o=t[e].controlled;for(let i=0;i<t.length;i++)if(i!=e&&t[i].controlled>=o){n=!1;break}return n}function je(e,t,n){let o,{gameOver:i=!1}=t,{scores:r=[]}=t,{leaders:s=[]}=t;return e.$$set=e=>{"gameOver"in e&&n(0,i=e.gameOver),"scores"in e&&n(1,r=e.scores),"leaders"in e&&n(3,s=e.leaders)},e.$$.update=()=>{9&e.$$.dirty&&n(2,o=i&&s.length>0)},[i,r,o,s]}class Ie extends W{constructor(e){var t;super(),document.getElementById("svelte-n38d5k-style")||((t=g("style")).id="svelte-n38d5k-style",t.textContent="p.svelte-n38d5k{padding:8px}div.container.svelte-n38d5k{white-space:nowrap}div.gameover.svelte-n38d5k{width:535px;border-radius:5px;color:white;background-color:rgba(255, 0, 0, 0.6);font-weight:bold}",u(document.head,t)),Q(this,e,je,ke,l,{gameOver:0,scores:1,leaders:3})}}function Me(e){let n,o,i,r,s;return{c(){n=g("div"),o=g("input"),i=h("\n  See projected board"),$(o,"type","checkbox"),$(n,"class","svelte-jy7duu")},m(t,l){f(t,n,l),u(n,o),u(n,i),r||(s=y(o,"change",e[0]),r=!0)},p:t,i:t,o:t,d(e){e&&m(n),r=!1,s()}}}function Se(e){return[function(t){C.call(this,e,t)}]}class ze extends W{constructor(e){var t;super(),document.getElementById("svelte-jy7duu-style")||((t=g("style")).id="svelte-jy7duu-style",t.textContent="div.svelte-jy7duu{margin-top:1em}",u(document.head,t)),Q(this,e,Se,Me,l,{})}}const{document:Ee}=R;function He(e){let n;return{c(){n=g("p"),n.textContent="The game will start when you make your first move.",$(n,"class","svelte-1pfd73t")},m(e,t){f(e,n,t)},p:t,d(e){e&&m(n)}}}function Oe(e){let t,n,o,i,r,s,l;return{c(){t=g("p"),t.textContent="The game will start after all players have made their first move. To\n      invite a friend to the game, share the following link:",n=v(),o=g("p"),i=g("span"),r=h(e[1]),$(t,"class","svelte-1pfd73t"),$(i,"id","share-url"),$(i,"class","svelte-1pfd73t"),$(o,"class","share svelte-1pfd73t")},m(e,c){f(e,t,c),f(e,n,c),f(e,o,c),u(o,i),u(i,r),s||(l=y(o,"mouseup",Be),s=!0)},p(e,t){2&t&&b(r,e[1])},d(e){e&&m(t),e&&m(n),e&&m(o),s=!1,l()}}}function Pe(e){let n;function o(e,t){return e[0]?Oe:He}let i=o(e),r=i(e);return{c(){n=g("div"),r.c(),$(n,"class","svelte-1pfd73t")},m(e,t){f(e,n,t),r.m(n,null)},p(e,[t]){i===(i=o(e))&&r?r.p(e,t):(r.d(1),r=i(e),r&&(r.c(),r.m(n,null)))},i:t,o:t,d(e){e&&m(n),r.d()}}}function Be(){const e=document.getElementById("share-url"),t=document.createRange();t.selectNodeContents(e);const n=window.getSelection();n.removeAllRanges(),n.addRange(t),document.execCommand("copy")}function Te(e,t,n){let o,{gameId:i=0}=t,{vsHumans:r=!1}=t;return e.$$set=e=>{"gameId"in e&&n(2,i=e.gameId),"vsHumans"in e&&n(0,r=e.vsHumans)},e.$$.update=()=>{4&e.$$.dirty&&n(1,o=`${window.location.protocol}//${window.location.host}/game/${i}`)},[r,o,i]}class Ae extends W{constructor(e){var t;super(),Ee.getElementById("svelte-1pfd73t-style")||((t=g("style")).id="svelte-1pfd73t-style",t.textContent="div.svelte-1pfd73t.svelte-1pfd73t{width:535px;border-radius:5px;color:white;background-color:rgba(255, 0, 0, 0.6);font-weight:bold}p.svelte-1pfd73t.svelte-1pfd73t{padding:8px;margin-bottom:0px}p.share.svelte-1pfd73t.svelte-1pfd73t{margin-top:2px;color:yellow}p.share.svelte-1pfd73t span.svelte-1pfd73t{padding:4px;border-radius:5px;border-color:black;border-style:dashed}",u(Ee.head,t)),Q(this,e,Te,Pe,l,{gameId:2,vsHumans:0})}}function Le(e){let n;return{c(){n=g("p"),n.textContent="Loading..."},m(e,t){f(e,n,t)},p:t,i:t,o:t,d(e){e&&m(n)}}}function Ne(e){let t,n,o,i,r,s,l;const c=[Ue,Fe],d=[];function a(e,t){return 0==e[3]?0:1}return t=a(e),n=d[t]=c[t](e),i=new ze({}),i.$on("change",e[7]),s=new fe({props:{height:e[0].getSetting("dimension_x"),width:e[0].getSetting("dimension_y"),moveHistory:e[0].moveHistory,allowMove:e[4],spots:e[5],turnCompleted:e[3]}}),s.$on("move",e[6]),{c(){n.c(),o=v(),D(i.$$.fragment),r=v(),D(s.$$.fragment)},m(e,n){d[t].m(e,n),f(e,o,n),G(i,e,n),f(e,r,n),G(s,e,n),l=!0},p(e,i){let r=t;t=a(e),t===r?d[t].p(e,i):(N(),V(d[r],1,1,()=>{d[r]=null}),F(),n=d[t],n?n.p(e,i):(n=d[t]=c[t](e),n.c()),U(n,1),n.m(o.parentNode,o));const l={};1&i&&(l.height=e[0].getSetting("dimension_x")),1&i&&(l.width=e[0].getSetting("dimension_y")),1&i&&(l.moveHistory=e[0].moveHistory),16&i&&(l.allowMove=e[4]),32&i&&(l.spots=e[5]),8&i&&(l.turnCompleted=e[3]),s.$set(l)},i(e){l||(U(n),U(i.$$.fragment,e),U(s.$$.fragment,e),l=!0)},o(e){V(n),V(i.$$.fragment,e),V(s.$$.fragment,e),l=!1},d(e){d[t].d(e),e&&m(o),J(i,e),e&&m(r),J(s,e)}}}function Fe(e){let t,n;return t=new Ie({props:{gameOver:e[1],scores:e[0].scores}}),{c(){D(t.$$.fragment)},m(e,o){G(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.gameOver=e[1]),1&n&&(o.scores=e[0].scores),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Ue(e){let t,n;return t=new Ae({props:{gameId:e[0].gameId,vsHumans:e[0].isVsHuman()}}),{c(){D(t.$$.fragment)},m(e,o){G(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.gameId=e[0].gameId),1&n&&(o.vsHumans=e[0].isVsHuman()),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){V(t.$$.fragment,e),n=!1},d(e){J(t,e)}}}function Ve(e){let t,n,o,i;const r=[Ne,Le],s=[];function l(e,t){return e[2]?0:1}return t=l(e),n=s[t]=r[t](e),{c(){n.c(),o=h("")},m(e,n){s[t].m(e,n),f(e,o,n),i=!0},p(e,[i]){let c=t;t=l(e),t===c?s[t].p(e,i):(N(),V(s[c],1,1,()=>{s[c]=null}),F(),n=s[t],n?n.p(e,i):(n=s[t]=r[t](e),n.c()),U(n,1),n.m(o.parentNode,o))},i(e){i||(U(n),i=!0)},o(e){V(n),i=!1},d(e){s[t].d(e),e&&m(o)}}}function Re(e,t,n){let o,i,r,s,l,{gameId:c=0}=t,d=new X(c);return new Z(d,()=>{n(0,d)}).start(),e.$$set=e=>{"gameId"in e&&n(8,c=e.gameId)},e.$$.update=()=>{1&e.$$.dirty&&n(2,o=d.init),1&e.$$.dirty&&n(1,i=d.completed),1&e.$$.dirty&&n(3,r=d.turnCompleted),3&e.$$.dirty&&n(4,s=!i&&d.timeStarted>0),1&e.$$.dirty&&n(5,l=d.spotsCurrent)},[d,i,o,r,s,l,function(e){const t=e.detail.x,o=e.detail.y;n(4,s=!1),fetch(`/api/v1/game/${c}/move/${t}/${o}`)},function(e){e.target.checked?(n(4,s=!1),n(5,l=d.spotsProjected)):(n(4,s=!0),n(5,l=d.spotsCurrent))},c]}async function Ye(e,t,n){const o={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({player_count:e,ai_count:t,ai_strength:n})};return fetch("/api/v1/game/new",o).then(e=>{if(200==e.status)return e.json();throw e.statusText}).then(e=>{const t=e.game.game_id;window.location.assign("/game/"+t)}).catch(()=>{})}function qe(e,t,n){const o=e.slice();return o[6]=t[n],o}function De(e){let t,n,o,i,r,s,l=e[6][0]+"";return{c(){t=g("button"),n=h(l),o=v(),$(t,"class","button-difficulty svelte-1czfe8e"),$(t,"difficulty",i=e[6][1]),w(t,"button-difficulty-selected",e[0]==e[6][1])},m(i,l){f(i,t,l),u(t,n),u(t,o),r||(s=y(t,"mouseup",e[4]),r=!0)},p(e,n){3&n&&w(t,"button-difficulty-selected",e[0]==e[6][1])},d(e){e&&m(t),r=!1,s()}}}function Ge(e){let n,o,i,s,l,c,d,a,h,b,x,w,_,k,C=e[1],j=[];for(let t=0;t<C.length;t+=1)j[t]=De(qe(e,C,t));return{c(){n=g("div"),o=g("div"),o.innerHTML='<img src="/img/intro.gif" alt="Demo gif"/>',i=v(),s=g("div"),l=g("div"),c=g("div"),d=g("button"),d.textContent="Play AI",a=v(),h=g("div");for(let e=0;e<j.length;e+=1)j[e].c();b=v(),x=g("div"),w=g("button"),w.textContent="Play Friend",$(o,"class","block svelte-1czfe8e"),$(d,"class","button-play button-ai svelte-1czfe8e"),$(h,"class","difficulty svelte-1czfe8e"),$(l,"class","option-ai svelte-1czfe8e"),$(w,"class","button-play button-friend svelte-1czfe8e"),$(x,"class","option-friend svelte-1czfe8e"),$(s,"class","block svelte-1czfe8e"),$(n,"class","container svelte-1czfe8e")},m(t,r){f(t,n,r),u(n,o),u(n,i),u(n,s),u(s,l),u(l,c),u(c,d),u(l,a),u(l,h);for(let e=0;e<j.length;e+=1)j[e].m(h,null);u(s,b),u(s,x),u(x,w),_||(k=[y(d,"mouseup",e[2]),y(w,"mouseup",e[3])],_=!0)},p(e,[t]){if(19&t){let n;for(C=e[1],n=0;n<C.length;n+=1){const o=qe(e,C,n);j[n]?j[n].p(o,t):(j[n]=De(o),j[n].c(),j[n].m(h,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=C.length}},i:t,o:t,d(e){e&&m(n),p(j,e),_=!1,r(k)}}}function Je(e,t,n){let o=0,i=0;return[i,[["Easy",0],["Medium",1],["Hard",2]],function(){o=1,Ye(2,o,i)},function(){Ye(2,o,i)},function(e){n(0,i=e.target.getAttribute("difficulty"))}]}return e.Game=class extends W{constructor(e){super(),Q(this,e,Re,Ve,l,{gameId:8})}},e.Menu=class extends W{constructor(e){var t;super(),document.getElementById("svelte-1czfe8e-style")||((t=g("style")).id="svelte-1czfe8e-style",t.textContent=".container.svelte-1czfe8e{display:inline-flex;flex-wrap:wrap}.block.svelte-1czfe8e{margin-right:1em}.option-ai.svelte-1czfe8e{margin-top:5%}.option-friend.svelte-1czfe8e{margin-top:8%}button.svelte-1czfe8e{cursor:pointer}.button-play.svelte-1czfe8e{border-radius:4px;color:white;font-size:300%;text-shadow:0 1px 1px rgba(0, 0, 0, 0.2)}.button-ai.svelte-1czfe8e{background:rgb(223, 117, 20)}.button-friend.svelte-1czfe8e{background:rgb(28, 184, 65)}div.difficulty.svelte-1czfe8e{margin-top:0.5em}.button-difficulty.svelte-1czfe8e{color:white;margin-right:0.5em;font-size:125%;text-shadow:0 1px 1px rgba(0, 0, 0, 0.2);background:rgb(223, 117, 20)}.button-difficulty-selected.svelte-1czfe8e{outline:3px dashed black;outline-offset:3px}",u(document.head,t)),Q(this,e,Je,Ge,l,{})}},e.detectCapabilities=function(){window.addEventListener("touchstart",(function e(){window.CAPABILITY_TOUCH=!0,window.removeEventListener("touchstart",e,!1)}),!1)},Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=ui.js.map
